{"version":3,"sources":["../../src/components/logList.js"],"names":["baseURL","coreModule","appEvents","LogStreamPageCtrl","$scope","$http","$location","$rootScope","timeSrv","root","location","http","selall","checkedItems","URL","cityListUrl","pageParams","cityTip","all","names","Object","assign","splice","length","event","x","ctrl","item","target","checked","push","from","moment","utc","absolute","fromJs","console","info","confirm","$","ajax","type","url","data","id","dataType","success","da","reload","alert","error","re","ids","i","traditional","responseText","cityModel","scope","elem","attrs","templateUrl"],"mappings":"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","file":"logList.js","sourcesContent":["import {baseURL} from \"./common/constVal\";\r\nimport {coreModule, appEvents} from  'app/core/core';\r\nexport class LogStreamPageCtrl\r\n{\r\n    constructor($scope,$http,$location,$rootScope,timeSrv)\r\n    {\r\n        this.root=$rootScope;\r\n\r\n        this.location=$location;\r\n        this.http=$http;\r\n        this.selall=false;//全选标志\r\n        this.checkedItems=[];\r\n        //分页\r\n        $scope.http=$http;\r\n        $scope.URL=$rootScope.cityListUrl?$rootScope.cityListUrl:'http://61.164.218.158:8080/AirServer/grafanalogs/logListByPage';\r\n        $scope.pageParams=$rootScope.cityTip?$rootScope.cityTip:{};\r\n    }\r\n\r\n    selectAll(all,names)\r\n    {\r\n        all? Object.assign(this.checkedItems, names):this.checkedItems.splice(0,this.checkedItems.length);\r\n        //console.info(this.checkedItems);\r\n    }\r\n    updateSelection(event,x,ctrl)\r\n    {\r\n        var item=event.target;\r\n\r\n        item.checked?ctrl.checkedItems.push(x):ctrl.checkedItems.splice(x,1);\r\n\r\n    }\r\n    absoluteFromChanged()\r\n    {\r\n        this.from=moment().utc(this.absolute.fromJs);\r\n        console.info(moment(this.absolute.fromJs));\r\n    }\r\n    deleteCity(item)\r\n    {\r\n        if(confirm('确定删除此项?'))\r\n        {\r\n            $.ajax({\r\n                type: 'POST',\r\n                url: baseURL+'deleteCityByID',\r\n                //'http://127.0.0.1:8080/grafana/addCity',\r\n                data: {id:item.id},\r\n                dataType:'json',\r\n                success:function (da)\r\n                {\r\n                    location.reload();\r\n                    alert('删除成功');\r\n                },\r\n                error:function (re) {\r\n                    console.info(re);\r\n                }\r\n            });\r\n        }\r\n\r\n    }\r\n    deleteSelCities()\r\n    {\r\n        if(confirm('确定删除选中项目?'))\r\n        {\r\n            var ids=[];\r\n            for(let i=0;i<this.checkedItems.length;i++)\r\n            {\r\n                ids.push(this.checkedItems[i].id);\r\n            }\r\n\r\n            $.ajax({\r\n                type: 'POST',\r\n                traditional: true,\r\n                url: baseURL+'deleteSelCities',\r\n                data: {ids:ids},\r\n                success:function (da)\r\n                {\r\n                    location.reload();\r\n                    alert('删除成功');\r\n                },\r\n                error:function (re) {\r\n                    console.info(re.responseText);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    setModel(item)\r\n    {\r\n        this.root.cityModel=item;\r\n\r\n    }\r\n\r\n    link(scope, elem, attrs, ctrl)\r\n    {\r\n\r\n    }\r\n}\r\nLogStreamPageCtrl.templateUrl = 'components/logList.html';\r\n\r\n\r\n\r\n"]}