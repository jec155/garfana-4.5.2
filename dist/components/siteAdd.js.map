{"version":3,"sources":["../../src/components/siteAdd.js"],"names":["baseURL","SiteAddCtrl","$scope","$http","$location","$rootScope","scope","location","siteMonTypeMap","siteTypeMap","statusMap","areaTypeMap","pageParams","http","URL","siteModel","dismiss","showCityList","choose","item","cityId","id","cityName","console","info","$","ajax","type","url","data","dataType","success","da","history","go","alert","error","re","templateUrl"],"mappings":";;;;;;;;;;;;;;;AAAQA,mB,mBAAAA,O;;;;;;;;;;;;;;;;;;;;;mCAEKC,W;AAEX,qCAAYC,MAAZ,EAAmBC,KAAnB,EAAyBC,SAAzB,EAAmCC,UAAnC,EACA;AAAA;;AACI,yBAAKC,KAAL,GAAWJ,MAAX;AACA,yBAAKK,QAAL,GAAcH,SAAd;;AAEAF,2BAAOM,cAAP,GAAwB;AAClB,6BAAM,MADY;AAElB,6BAAM,UAFY;AAGlB,6BAAM,OAHY;AAIlB,6BAAM,MAJY;AAKlB,6BAAM,SALY;AAMlB,6BAAM;AANY,qBAAxB;AAQEN,2BAAOO,WAAP,GAAqB;AACjB,kCAAW,MADM;AAEjB,mCAAY;AAFK,qBAArB;AAIAP,2BAAOQ,SAAP,GAAmB;AACf,uCAAgB,IADD;AAEf,wCAAiB,IAFF;AAGf,sCAAe;AAHA,qBAAnB;AAKAR,2BAAOS,WAAP,GAAqB;AACjB,+BAAQ;AADS,qBAArB;;AAIFT,2BAAOU,UAAP,GAAkB,EAAlB;AACAV,2BAAOW,IAAP,GAAYV,KAAZ;AACAD,2BAAOY,GAAP,GAAW,6DAAX;AACAZ,2BAAOa,SAAP,GAAiB,EAAjB;AACAb,2BAAOc,OAAP,GAAe,YAAY;AACvBd,+BAAOe,YAAP,GAAoB,CAACf,OAAOe,YAA5B;AAEH,qBAHD;AAIAf,2BAAOgB,MAAP,GAAc,UAAUC,IAAV,EAAgB;AAC1B;AACAjB,+BAAOa,SAAP,CAAiBK,MAAjB,GAAwBD,KAAKE,EAA7B;AACAnB,+BAAOa,SAAP,CAAiBO,QAAjB,GAA0BH,KAAKG,QAA/B;AACApB,+BAAOe,YAAP,GAAoB,CAACf,OAAOe,YAA5B;AACH,qBALD;AAMA;;;;;;;;;;AAWH;;;;2CAED;AACIM,gCAAQC,IAAR,CAAa,KAAKlB,KAAL,CAAWS,SAAxB;;AAEAU,0BAAEC,IAAF,CAAO;AACHC,kCAAM,KADH;AAEHC,iCAAK5B,UAAQ,SAFV;AAGC;AACJ6B,kCAAM,KAAKvB,KAAL,CAAWS,SAJd;AAKHe,sCAAS,MALN;AAMHC,qCAAQ,iBAAUC,EAAV,EACR;AACI;AACAC,wCAAQC,EAAR,CAAW,CAAC,CAAZ;AACAC,sCAAM,MAAN;AACH,6BAXE;AAYHC,mCAAM,eAAUC,EAAV,EAAc;AAChBd,wCAAQC,IAAR,CAAaa,EAAb;AACH;AAdE,yBAAP;AAgBH;;;;;;;;AAEHpC,wBAAYqC,WAAZ,GAA0B,2DAA1B","file":"siteAdd.js","sourcesContent":["import {baseURL} from \"./common/constVal\";\r\n\r\nexport class SiteAddCtrl\r\n{\r\n  constructor($scope,$http,$location,$rootScope)\r\n  {\r\n      this.scope=$scope;\r\n      this.location=$location;\r\n\r\n      $scope.siteMonTypeMap = {\r\n            \"1\" : \"空气质量\",\r\n            \"2\" : \"空气污染重点企业\",\r\n            \"3\" : \"饮用水水质\",\r\n            \"4\" : \"污水水质\",\r\n            \"5\" : \"水污染重点企业\",\r\n            \"6\" : \"主要流域重点断面水质\"\r\n        }\r\n        $scope.siteTypeMap = {\r\n            \"PUBLIC\" : \"公有站点\",\r\n            \"PRIVATE\" : \"私有站点\"\r\n        }\r\n        $scope.statusMap = {\r\n            \"SITE_NORMAL\" : \"正常\",\r\n            \"SITE_DISABLE\" : \"停用\",\r\n            \"SITE_ERROR\" : \"异常\"\r\n        }\r\n        $scope.areaTypeMap = {\r\n            \"TWO\" : \"适用于居住、商业、工业混杂区\"\r\n        }\r\n\r\n      $scope.pageParams={};\r\n      $scope.http=$http;\r\n      $scope.URL='http://61.164.218.158:8080/AirServer/grafana/cityListByPage';\r\n      $scope.siteModel={};\r\n      $scope.dismiss=function () {\r\n          $scope.showCityList=!$scope.showCityList;\r\n\r\n      };\r\n      $scope.choose=function (item) {\r\n          //console.info(item);\r\n          $scope.siteModel.cityId=item.id;\r\n          $scope.siteModel.cityName=item.cityName;\r\n          $scope.showCityList=!$scope.showCityList;\r\n      };\r\n      /*$scope.clearNoNum = function(attr) {\r\n//先把非数字的都替换掉，除了数字和.\r\n          attr = attr.replace(/[^\\d.]/g, \"\");\r\n//必须保证第一个为数字而不是.\r\n          attr =attr.replace(/^\\./g, \"\");\r\n//保证只有出现一个.而没有多个.\r\n          attr = attr.replace(/\\.{2,}/g, \"\");\r\n//保证.只出现一次，而不能出现两次以上\r\n          attr = attr.replace(\".\", \"$#$\").replace(/\\./g, \"\").replace(\"$#$\", \".\");\r\n      }*/\r\n\r\n  }\r\n  save()\r\n  {\r\n      console.info(this.scope.siteModel);\r\n\r\n      $.ajax({\r\n          type: 'GET',\r\n          url: baseURL+'addSite',\r\n              //'http://127.0.0.1:8080/grafana/editCity',\r\n          data: this.scope.siteModel,\r\n          dataType:'json',\r\n          success:function (da)\r\n          {\r\n              //loc.path('plugins/grafana-example-app/page/live-stream');\r\n              history.go(-1);\r\n              alert('编辑成功');\r\n          },\r\n          error:function (re) {\r\n              console.info(re);\r\n          }\r\n      });\r\n  }\r\n}\r\nSiteAddCtrl.templateUrl = 'public/plugins/grafana-management/components/siteAdd.html';\r\n\r\n\r\n"]}