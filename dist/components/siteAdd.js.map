{"version":3,"sources":["../../src/components/siteAdd.js"],"names":["SiteAddCtrl","$scope","$http","$location","$rootScope","http","scope","location","cityModel","siteMonTypeMap","siteTypeMap","statusMap","areaTypeMap","autoUpdMap","true","false","pageParams","URL","dismiss","showCityList","choose","item","deviceTip","siteId","id","siteName","cityAuto","loc","cityTip","siteCode","siteType","siteMonType","siteCreateTime","siteLatitude","siteLongitude","autoUpd","comment","managerment","$","ajax","type","url","data","dataType","success","da","history","go","alert","error","re","console","info","templateUrl"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mCACaA,W;AAEX,qCAAYC,MAAZ,EAAmBC,KAAnB,EAAyBC,SAAzB,EAAmCC,UAAnC,EACA;AAAA;;AACI,yBAAKC,IAAL,GAAUH,KAAV;AACA,yBAAKI,KAAL,GAAWL,MAAX;AACA,yBAAKM,QAAL,GAAcJ,SAAd;AACAF,2BAAOO,SAAP,GAAiBJ,WAAWI,SAA5B;;AAEAP,2BAAOQ,cAAP,GAAwB;AAClB,6BAAM,MADY;AAElB,6BAAM,UAFY;AAGlB,6BAAM,OAHY;AAIlB,6BAAM,MAJY;AAKlB,6BAAM,SALY;AAMlB,6BAAM;AANY,qBAAxB;AAQER,2BAAOS,WAAP,GAAqB;AACjB,kCAAW,MADM;AAEjB,mCAAY;AAFK,qBAArB;AAIAT,2BAAOU,SAAP,GAAmB;AACf,uCAAgB,IADD;AAEf,wCAAiB,IAFF;AAGf,sCAAe;AAHA,qBAAnB;AAKAV,2BAAOW,WAAP,GAAqB;AACjB,+BAAQ;AADS,qBAArB;AAGAX,2BAAOY,UAAP,GAAoB;AAChBC,8BAAO,GADS;AAEhBC,+BAAQ;AAFQ,qBAApB;;AAKFd,2BAAOe,UAAP,GAAkB,EAAlB;AACAf,2BAAOI,IAAP,GAAYH,KAAZ;AACAD,2BAAOgB,GAAP,GAAW,6DAAX;;AAEAhB,2BAAOiB,OAAP,GAAe,YAAY;AACvBjB,+BAAOkB,YAAP,GAAoB,CAAClB,OAAOkB,YAA5B;AAEH,qBAHD;AAIAlB,2BAAOmB,MAAP,GAAc,UAAUC,IAAV,EAAgB;AAC1B;AACApB,+BAAOqB,SAAP,CAAiBC,MAAjB,GAAwBF,KAAKG,EAA7B;AACAvB,+BAAOqB,SAAP,CAAiBG,QAAjB,GAA0BJ,KAAKI,QAA/B;AACAxB,+BAAOkB,YAAP,GAAoB,CAAClB,OAAOkB,YAA5B;AACH,qBALD;AAOH;;;;2CAED;AACI,4BAAIO,WAAS;AACXZ,kCAAO,CADI;AAEXC,mCAAQ;AAFG,yBAAb;AAIA,4BAAIY,MAAI,KAAKpB,QAAb;AACA,4BAAIqB,UAAQ;AACM,wCAAW,KAAKtB,KAAL,CAAWE,SAAX,CAAqBqB,QADtC;AAEM,wCAAW,KAAKvB,KAAL,CAAWE,SAAX,CAAqBiB,QAFtC;AAGM,wCAAW,KAAKnB,KAAL,CAAWE,SAAX,CAAqBsB,QAHtC;AAIM,2CAAc,KAAKxB,KAAL,CAAWE,SAAX,CAAqBuB,WAJzC;AAKM,sCAAS,CAAC,CALhB;AAMM,0CAAa,KAAKzB,KAAL,CAAWE,SAAX,CAAqBwB,cANxC;AAOM,4CAAe,KAAK1B,KAAL,CAAWE,SAAX,CAAqByB,YAP1C;AAQM,6CAAgB,KAAK3B,KAAL,CAAWE,SAAX,CAAqB0B,aAR3C;AASM,uCAAUR,SAAS,KAAKpB,KAAL,CAAWE,SAAX,CAAqB2B,OAA9B,CAThB;AAUM,uCAAU,KAAK7B,KAAL,CAAWE,SAAX,CAAqB4B,OAVrC;AAWM,2CAAc,KAAK9B,KAAL,CAAWE,SAAX,CAAqB6B,WAXzC,EAAZ;AAYAC,0BAAEC,IAAF,CAAO;AACHC,kCAAM,KADH;AAEHC,iCAAK,sDAFF;AAGC;AACJC,kCAAMd,OAJH;AAKHe,sCAAS,MALN;AAMHC,qCAAQ,iBAAUC,EAAV,EACR;AACI;AACAC,wCAAQC,EAAR,CAAW,CAAC,CAAZ;AACAC,sCAAM,MAAN;AACH,6BAXE;AAYHC,mCAAM,eAAUC,EAAV,EAAc;AAChBC,wCAAQC,IAAR,CAAaF,EAAb;AACH;AAdE,yBAAP;AAgBA;;;AAGH;;;;;;;;AAEHlD,wBAAYqD,WAAZ,GAA0B,2DAA1B","file":"siteAdd.js","sourcesContent":["\r\nexport class SiteAddCtrl\r\n{\r\n  constructor($scope,$http,$location,$rootScope)\r\n  {\r\n      this.http=$http;\r\n      this.scope=$scope;\r\n      this.location=$location;\r\n      $scope.cityModel=$rootScope.cityModel;\r\n\r\n      $scope.siteMonTypeMap = {\r\n            \"1\" : \"空气质量\",\r\n            \"2\" : \"空气污染重点企业\",\r\n            \"3\" : \"饮用水水质\",\r\n            \"4\" : \"污水水质\",\r\n            \"5\" : \"水污染重点企业\",\r\n            \"6\" : \"主要流域重点断面水质\"\r\n        }\r\n        $scope.siteTypeMap = {\r\n            \"PUBLIC\" : \"公有站点\",\r\n            \"PRIVATE\" : \"私有站点\"\r\n        }\r\n        $scope.statusMap = {\r\n            \"SITE_NORMAL\" : \"正常\",\r\n            \"SITE_DISABLE\" : \"停用\",\r\n            \"SITE_ERROR\" : \"异常\"\r\n        }\r\n        $scope.areaTypeMap = {\r\n            \"TWO\" : \"适用于居住、商业、工业混杂区\"\r\n        }\r\n        $scope.autoUpdMap = {\r\n            true : \"是\",\r\n            false : \"否\"\r\n        };\r\n\r\n      $scope.pageParams={};\r\n      $scope.http=$http;\r\n      $scope.URL='http://61.164.218.158:8080/AirServer/grafana/cityListByPage';\r\n\r\n      $scope.dismiss=function () {\r\n          $scope.showCityList=!$scope.showCityList;\r\n\r\n      };\r\n      $scope.choose=function (item) {\r\n          //console.info(item);\r\n          $scope.deviceTip.siteId=item.id;\r\n          $scope.deviceTip.siteName=item.siteName;\r\n          $scope.showCityList=!$scope.showCityList;\r\n      };\r\n\r\n  }\r\n  save()\r\n  {   \r\n      let cityAuto={\r\n        true : 1,\r\n        false : 0\r\n      }\r\n      var loc=this.location;\r\n      let cityTip={\r\n                        \"siteCode\":this.scope.cityModel.siteCode,\r\n                        \"siteName\":this.scope.cityModel.siteName,\r\n                        \"siteType\":this.scope.cityModel.siteType,\r\n                        \"siteMontype\":this.scope.cityModel.siteMonType,\r\n                        \"cityId\":-1,\r\n                        \"createTime\":this.scope.cityModel.siteCreateTime,\r\n                        \"siteLatitude\":this.scope.cityModel.siteLatitude,\r\n                        \"siteLongitude\":this.scope.cityModel.siteLongitude,\r\n                        \"autoUpd\":cityAuto[this.scope.cityModel.autoUpd],\r\n                        \"comment\":this.scope.cityModel.comment,\r\n                        \"managerment\":this.scope.cityModel.managerment};\r\n      $.ajax({\r\n          type: 'GET',\r\n          url: 'http://61.164.218.158:8080/AirServer/grafana/addSite',\r\n              //'http://127.0.0.1:8080/grafana/editCity',\r\n          data: cityTip,\r\n          dataType:'json',\r\n          success:function (da)\r\n          {\r\n              //loc.path('plugins/grafana-example-app/page/live-stream');\r\n              history.go(-1);\r\n              alert('编辑成功');\r\n          },\r\n          error:function (re) {\r\n              console.info(re);\r\n          }\r\n      });\r\n      /*this.http.post('http://127.0.0.1:8080/grafana/addCity',this.scope.cityModel).then(function (response) {\r\n          console.info(response);\r\n      });*/\r\n  }\r\n}\r\nSiteAddCtrl.templateUrl = 'public/plugins/grafana-management/components/siteAdd.html';\r\n\r\n\r\n"]}