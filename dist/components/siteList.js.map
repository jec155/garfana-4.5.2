{"version":3,"sources":["../../src/components/siteList.js"],"names":["SiteStreamPageCtrl","$scope","$http","$location","$rootScope","root","location","http","selall","checkedItems","URL","cityListUrl","pageParams","siteTip","siteMonTypeMap","siteTypeMap","statusMap","all","names","Object","assign","splice","length","event","x","ctrl","item","target","checked","push","confirm","$","ajax","type","url","data","id","dataType","success","da","reload","alert","error","re","console","info","ids","i","traditional","responseText","cityModel","scope","elem","attrs","templateUrl"],"mappings":"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","file":"siteList.js","sourcesContent":["\r\nexport class SiteStreamPageCtrl\r\n{\r\n    constructor($scope,$http,$location,$rootScope)\r\n    {\r\n        this.root=$rootScope;\r\n\r\n        this.location=$location;\r\n        this.http=$http;\r\n        $scope.http=$http;\r\n        this.selall=false;//全选标志\r\n        this.checkedItems=[];\r\n        $scope.URL=$rootScope.cityListUrl?$rootScope.cityListUrl:'http://61.164.218.158:8080/AirServer/grafana/siteListByPage';\r\n        $scope.pageParams=$rootScope.siteTip?$rootScope.siteTip:{\r\n\r\n        };\r\n        $scope.siteMonTypeMap = {\r\n            \"1\" : \"空气质量\",\r\n            \"2\" : \"空气污染重点企业\",\r\n            \"3\" : \"饮用水水质\",\r\n            \"4\" : \"污水水质\",\r\n            \"5\" : \"水污染重点企业\",\r\n            \"6\" : \"主要流域重点断面水质\"\r\n        };\r\n        $scope.siteTypeMap = {\r\n            \"PUBLIC\" : \"公有站点\",\r\n            \"PRIVATE\" : \"私有站点\"\r\n        };\r\n        $scope.statusMap = {\r\n            \"SITE_NORMAL\" : \"正常\",\r\n            \"SITE_DISABLE\" : \"停用\",\r\n            \"SITE_ERROR\" : \"异常\"\r\n        }\r\n    }\r\n    selectAll(all,names)\r\n    {\r\n        all? Object.assign(this.checkedItems, names):this.checkedItems.splice(0,this.checkedItems.length);\r\n        //console.info(this.checkedItems);\r\n    }\r\n    updateSelection(event,x,ctrl)\r\n    {\r\n        var item=event.target;\r\n\r\n        item.checked?ctrl.checkedItems.push(x):ctrl.checkedItems.splice(x,1);\r\n\r\n    }\r\n    deleteCity(item)\r\n    {\r\n        if(confirm('确定删除此项?'))\r\n        {\r\n            $.ajax({\r\n                type: 'POST',\r\n                url: 'http://61.164.218.158:8080/AirServer/grafana/deleteCityByID',\r\n                //'http://127.0.0.1:8080/grafana/addCity',\r\n                data: {id:item.id},\r\n                dataType:'json',\r\n                success:function (da)\r\n                {\r\n                    location.reload();\r\n                    alert('删除成功');\r\n                },\r\n                error:function (re) {\r\n                    console.info(re);\r\n                }\r\n            });\r\n        }\r\n\r\n    }\r\n    deleteSelCities()\r\n    {\r\n        if(confirm('确定删除选中项目?'))\r\n        {\r\n            var ids=[];\r\n            for(let i=0;i<this.checkedItems.length;i++)\r\n            {\r\n                ids.push(this.checkedItems[i].id);\r\n            }\r\n\r\n            $.ajax({\r\n                type: 'POST',\r\n                traditional: true,\r\n                url: 'http://61.164.218.158:8080/AirServer/grafana/deleteSelCities',\r\n               // 'http://127.0.0.1:8080/grafana/deleteSelCities',\r\n                data: {ids:ids},\r\n                success:function (da)\r\n                {\r\n                    location.reload();\r\n                    alert('删除成功');\r\n                },\r\n                error:function (re) {\r\n                    console.info(re.responseText);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    setModel(item)\r\n    {\r\n        this.root.cityModel=item;\r\n    }\r\n\r\n    link(scope, elem, attrs, ctrl)\r\n    {\r\n\r\n    }\r\n}\r\nSiteStreamPageCtrl.templateUrl = 'components/siteList.html';\r\n\r\n\r\n"]}