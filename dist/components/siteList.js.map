{"version":3,"sources":["../../src/components/siteList.js"],"names":["SiteStreamPageCtrl","$scope","$http","$location","$rootScope","contextSrv","root","myPage","currentPage","totalItems","itemsPerPage","pagesLength","perPageOptions","location","http","selall","checkedItems","cityListUrl","cityTip","siteMonTypeMap","siteTypeMap","statusMap","all","names","Object","assign","splice","length","event","x","ctrl","item","target","checked","push","confirm","$","ajax","type","url","data","id","user","name","dataType","success","da","reload","alert","error","re","console","info","ids","i","traditional","responseText","cityModel","scope","elem","attrs","pageNub","getPageNub","setPageNub","n","parseInt","changeCurrentPage","p","getPagination","prevPage","nextPage","numberOfPages","jumpToPage","jumpPageNum","showError","changeItemsPerPage","get","params","siteCode","siteName","siteType","siteMonType","provice","city","dep","checkMan","status","then","response","Math","ceil","pageList","offset","templateUrl"],"mappings":"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","file":"siteList.js","sourcesContent":["\nimport './my-pagination.css!';\nimport './cityList.css!';\nexport class SiteStreamPageCtrl\n{\n    constructor($scope,$http,$location,$rootScope,contextSrv)\n    {\n        this.root=$rootScope;\n        //分页\n        $scope.myPage={\n            currentPage:1,//访问第几页数据，从1开始\n            totalItems:0,//数据库中总共有多少条数据\n            itemsPerPage: 10,//默认每页展示多少条数据，可更改\n            pagesLength: 15,\n            perPageOptions: [10,15,25]//可选择的每页展示多少条数据\n        };\n        this.contextSrv=contextSrv;\n        this.location=$location;\n        this.http=$http;\n        this.selall=false;//全选标志\n        this.checkedItems=[];\n        $scope.cityListUrl=$rootScope.cityListUrl?$rootScope.cityListUrl:'http://61.164.218.158:8080/AirServer/grafana/siteListByPage';\n        $scope.cityTip=$rootScope.cityTip?$rootScope.cityTip:{};\n        $scope.siteMonTypeMap = {\n            \"1\" : \"空气质量\",\n            \"2\" : \"空气污染重点企业\",\n            \"3\" : \"饮用水水质\",\n            \"4\" : \"污水水质\",\n            \"5\" : \"水污染重点企业\",\n            \"6\" : \"主要流域重点断面水质\"\n        }\n        $scope.siteTypeMap = {\n            \"PUBLIC\" : \"公有站点\",\n            \"PRIVATE\" : \"私有站点\"\n        }\n        $scope.statusMap = {\n            \"SITE_NORMAL\" : \"正常\",\n            \"SITE_DISABLE\" : \"停用\",\n            \"SITE_ERROR\" : \"异常\"\n        }\n    }\n    selectAll(all,names)\n    {\n        all? Object.assign(this.checkedItems, names):this.checkedItems.splice(0,this.checkedItems.length);\n        //console.info(this.checkedItems);\n    }\n    updateSelection(event,x,ctrl)\n    {\n        var item=event.target;\n\n        item.checked?ctrl.checkedItems.push(x):ctrl.checkedItems.splice(x,1);\n\n    }\n    deleteCity(item)\n    {\n        if(confirm('确定删除此项?'))\n        {\n            $.ajax({\n                type: 'POST',\n                url: 'http://61.164.218.158:8080/AirServer/grafana/deleteCityByID',\n                //'http://127.0.0.1:8080/grafana/addCity',\n                data: {id:item.id,\"username\":this.contextSrv.user.name},\n                dataType:'json',\n                success:function (da)\n                {\n                    location.reload();\n                    alert('删除成功');\n                },\n                error:function (re) {\n                    console.info(re);\n                }\n            });\n        }\n\n    }\n    deleteSelCities()\n    {\n        if(confirm('确定删除选中项目?'))\n        {\n            var ids=[];\n            for(let i=0;i<this.checkedItems.length;i++)\n            {\n                ids.push(this.checkedItems[i].id);\n            }\n\n            $.ajax({\n                type: 'POST',\n                traditional: true,\n                url: 'http://61.164.218.158:8080/AirServer/grafana/deleteSelCities',\n               // 'http://127.0.0.1:8080/grafana/deleteSelCities',\n                data: {ids:ids,\"username\":this.contextSrv.user.name},\n                success:function (da)\n                {\n                    location.reload();\n                    alert('删除成功');\n                },\n                error:function (re) {\n                    console.info(re.responseText);\n                }\n            });\n        }\n    }\n    setModel(item)\n    {\n        this.root.cityModel=item;\n\n    }\n\n    link(scope, elem, attrs, ctrl)\n    {\n        var myPage={};\n        myPage.pageNub=1;\n        myPage.getPageNub=function () {\n            return myPage.pageNub;\n        };\n        myPage.setPageNub=function (n) {\n            myPage.pageNub=n;\n        };\n        scope.myPage.currentPage=myPage.pageNub;\n        // 定义分页的长度必须为奇数 (default:9)\n        scope.myPage.pagesLength = parseInt(scope.myPage.pagesLength) ? parseInt(scope.myPage.pagesLength) : 9 ;\n        if(scope.myPage.pagesLength % 2 === 0){\n            // 如果不是奇数的时候处理一下\n            scope.myPage.pagesLength = scope.myPage.pagesLength -1;\n        }\n        if(!scope.myPage.perPageOptions){\n            scope.myPage.perPageOptions = [10, 15, 20];\n        }\n        scope.changeCurrentPage = function(p){\n            if(p == '...'){\n                return;\n            }else{\n                scope.myPage.currentPage = p;\n                myPage.setPageNub(scope.myPage.currentPage);\n            }\n            getPagination(scope.cityListUrl);\n        };\n        scope.prevPage = function(){\n            if(scope.myPage.currentPage > 1){\n                scope.myPage.currentPage -= 1;\n            }else {\n                scope.myPage.currentPage=1;\n            }\n            myPage.setPageNub(scope.myPage.currentPage);\n            getPagination(scope.cityListUrl);\n        };\n        // nextPage\n        scope.nextPage = function(){\n            if(scope.myPage.currentPage < scope.myPage.numberOfPages){\n                scope.myPage.currentPage += 1;\n            }else {\n                scope.myPage.currentPage=scope.myPage.numberOfPages;\n            }\n            myPage.setPageNub(scope.myPage.currentPage);\n            getPagination(scope.cityListUrl)\n        };\n\n        // 跳转页\n        scope.jumpToPage = function(){\n            if(scope.myPage.jumpPageNum>0 || scope.myPage.jumpPageNum<=scope.myPage.numberOfPages){\n                scope.myPage.currentPage=scope.myPage.jumpPageNum;\n                myPage.setPageNub(scope.myPage.currentPage);\n                getPagination(scope.cityListUrl);\n                //scope.myPage.jumpPageNum='';\n            }else {\n                scope.myPage.showError=true;\n            }\n        };\n        // 修改每页显示的条数\n        scope.changeItemsPerPage = function(){\n            getPagination(scope.cityListUrl);\n        };\n        getPagination(scope.cityListUrl);\n\n        function getPagination(url){\n            ctrl.http.get(url\n                ,{params:{\"page\":scope.myPage.currentPage,\"limit\":scope.myPage.itemsPerPage,\n                \"siteCode\":scope.cityTip.siteCode,\"siteName\":scope.cityTip.siteName,\n                \"siteType\":scope.cityTip.siteType,\"siteMonType\":scope.cityTip.siteMonType,\n                \"provice\":scope.cityTip.provice,\"city\":scope.cityTip.city,\n                \"dep\":scope.cityTip.dep,\"checkMan\":scope.cityTip.checkMan,\n                \"status\":scope.cityTip.status,\"username\":ctrl.contextSrv.user.name}}).then(\n                function (response)\n                {\n                    scope.names=response.data.data;\n                                        scope.myPage.totalItems=response.data.totalItems;//当获取总数据后，修改默认值\n                    scope.myPage.currentPage = parseInt(myPage.pageNub);\n                    // pg.totalItems\n                    scope.myPage.totalItems = parseInt(scope.myPage.totalItems);\n\n                    // numberOfPages,总共分多少页\n                    scope.myPage.numberOfPages = Math.ceil(scope.myPage.totalItems/scope.myPage.itemsPerPage);\n                    //console.info(scope.myPage.totalItems);\n                    // judge currentPage > scope.numberOfPages\n                    if(scope.myPage.currentPage < 1){\n                        scope.myPage.currentPage = 1;\n                    }\n\n                    if(scope.myPage.currentPage > scope.myPage.numberOfPages){\n                        scope.myPage.currentPage = scope.myPage.numberOfPages;\n                    }\n\n                    scope.pageList = [];\n                    var i;\n                    if(scope.myPage.numberOfPages <= scope.myPage.pagesLength){\n                        // 判断总页数如果小于等于分页的长度，若小于则直接显示\n                        for(i =1; i <= scope.myPage.numberOfPages; i++){\n                            scope.pageList.push(i);\n                        }\n                    }else{\n                        // 总页数大于分页长度（此时分为三种情况：1.左边没有...2.右边没有...3.左右都有...）\n                        // 计算中心偏移量\n                        var offset = (scope.myPage.pagesLength - 1)/2;\n                        if(scope.myPage.currentPage <= offset){\n                            // 左边没有...\n                            for(i =1; i <= offset +1; i++){\n                                scope.pageList.push(i);\n                            }\n                            scope.pageList.push('...');\n                            scope.pageList.push(scope.myPage.numberOfPages);\n                            //    >实际总页数-每页的一半\n                        }else if(scope.myPage.currentPage > scope.myPage.numberOfPages - offset){\n                            scope.pageList.push(1);\n                            scope.pageList.push('...');\n                            for(i = offset + 1; i >= 1; i--){\n                                scope.pageList.push(scope.myPage.numberOfPages - i);\n                            }\n                            scope.pageList.push(scope.myPage.numberOfPages);\n                        }else{\n                            // 最后一种情况，两边都有...\n                            scope.pageList.push(1);\n                            scope.pageList.push('...');\n\n                            for(i = Math.ceil(offset/2) ; i >= 1; i--){\n                                scope.pageList.push(scope.myPage.currentPage - i);\n                            }\n                            scope.pageList.push(scope.myPage.currentPage);\n                            for(i = 1; i <= offset/2; i++){\n                                scope.pageList.push(scope.myPage.currentPage + i);\n                            }\n\n                            scope.pageList.push('...');\n                            scope.pageList.push(scope.myPage.numberOfPages);\n                        }\n                    }\n                }\n            )\n        }\n    }\n}\nSiteStreamPageCtrl.templateUrl = 'components/siteList.html';\n\n\n"]}