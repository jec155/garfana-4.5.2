{"version":3,"sources":["../../src/components/siteList.js"],"names":["SiteListDevice","$scope","$http","$location","$rootScope","root","myPage","currentPage","totalItems","itemsPerPage","pagesLength","perPageOptions","location","http","selall","checkedItems","cityListUrl","cityTip","siteMap","all","names","Object","assign","splice","length","event","x","ctrl","item","target","checked","push","confirm","$","ajax","type","url","data","id","dataType","success","da","reload","alert","error","re","console","info","ids","i","traditional","responseText","cityModel","scope","elem","attrs","pageNub","getPageNub","setPageNub","n","parseInt","changeCurrentPage","p","getPagination","prevPage","nextPage","numberOfPages","jumpToPage","jumpPageNum","showError","changeItemsPerPage","get","params","name","monType","seqno","firmware","siteName","status","productDate","useDate","lastModifierId","checkUserName","then","response","Math","ceil","pageList","offset","templateUrl"],"mappings":"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","file":"siteList.js","sourcesContent":["\r\nimport './my-pagination.css!';\r\nimport './cityList.css!';\r\nexport class SiteListDevice\r\n{\r\n    constructor($scope,$http,$location,$rootScope)\r\n    {\r\n        this.root=$rootScope;\r\n        //分页\r\n        $scope.myPage={\r\n            currentPage:1,//访问第几页数据，从1开始\r\n            totalItems:0,//数据库中总共有多少条数据\r\n            itemsPerPage: 10,//默认每页展示多少条数据，可更改\r\n            pagesLength: 15,\r\n            perPageOptions: [10,15,25]//可选择的每页展示多少条数据\r\n        };\r\n        this.location=$location;\r\n        this.http=$http;\r\n        this.selall=false;//全选标志\r\n        this.checkedItems=[];\r\n        $scope.cityListUrl=$rootScope.cityListUrl?$rootScope.cityListUrl:'http://61.164.218.158:8080/AirServer/grafana/deivceListByPage';\r\n        $scope.cityTip=$rootScope.cityTip?$rootScope.cityTip:{};\r\n        $scope.siteMap = {\r\n                        'AIR':'空气质量',\r\n                        'WATER':'水环境',\r\n                        'MULTI':'多功能'\r\n                    }\r\n\r\n    }\r\n    \r\n    selectAll(all,names)\r\n    {\r\n        all? Object.assign(this.checkedItems, names):this.checkedItems.splice(0,this.checkedItems.length);\r\n        //console.info(this.checkedItems);\r\n    }\r\n    updateSelection(event,x,ctrl)\r\n    {\r\n        var item=event.target;\r\n\r\n        item.checked?ctrl.checkedItems.push(x):ctrl.checkedItems.splice(x,1);\r\n\r\n    }\r\n    deleteCity(item)\r\n    {\r\n        if(confirm('确定删除此项?'))\r\n        {\r\n            $.ajax({\r\n                type: 'POST',\r\n                url: 'http://61.164.218.158:8080/AirServer/grafana/deleteCityByID',\r\n                //'http://127.0.0.1:8080/grafana/addCity',\r\n                data: {id:item.id},\r\n                dataType:'json',\r\n                success:function (da)\r\n                {\r\n                    location.reload();\r\n                    alert('删除成功');\r\n                },\r\n                error:function (re) {\r\n                    console.info(re);\r\n                }\r\n            });\r\n        }\r\n\r\n    }\r\n    deleteSelCities()\r\n    {\r\n        if(confirm('确定删除选中项目?'))\r\n        {\r\n            var ids=[];\r\n            for(let i=0;i<this.checkedItems.length;i++)\r\n            {\r\n                ids.push(this.checkedItems[i].id);\r\n            }\r\n\r\n            $.ajax({\r\n                type: 'POST',\r\n                traditional: true,\r\n                url: 'http://61.164.218.158:8080/AirServer/grafana/deleteSelCities',\r\n               // 'http://127.0.0.1:8080/grafana/deleteSelCities',\r\n                data: {ids:ids},\r\n                success:function (da)\r\n                {\r\n                    location.reload();\r\n                    alert('删除成功');\r\n                },\r\n                error:function (re) {\r\n                    console.info(re.responseText);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    setModel(item)\r\n    {\r\n        this.root.cityModel=item;\r\n\r\n    }\r\n\r\n    link(scope, elem, attrs, ctrl)\r\n    {\r\n        var myPage={};\r\n        myPage.pageNub=1;\r\n        myPage.getPageNub=function () {\r\n            return myPage.pageNub;\r\n        };\r\n        myPage.setPageNub=function (n) {\r\n            myPage.pageNub=n;\r\n        };\r\n        scope.myPage.currentPage=myPage.pageNub;\r\n        // 定义分页的长度必须为奇数 (default:9)\r\n        scope.myPage.pagesLength = parseInt(scope.myPage.pagesLength) ? parseInt(scope.myPage.pagesLength) : 9 ;\r\n        if(scope.myPage.pagesLength % 2 === 0){\r\n            // 如果不是奇数的时候处理一下\r\n            scope.myPage.pagesLength = scope.myPage.pagesLength -1;\r\n        }\r\n        if(!scope.myPage.perPageOptions){\r\n            scope.myPage.perPageOptions = [10, 15, 20];\r\n        }\r\n        scope.changeCurrentPage = function(p){\r\n            if(p == '...'){\r\n                return;\r\n            }else{\r\n                scope.myPage.currentPage = p;\r\n                myPage.setPageNub(scope.myPage.currentPage);\r\n            }\r\n            getPagination(scope.cityListUrl);\r\n        };\r\n        scope.prevPage = function(){\r\n            if(scope.myPage.currentPage > 1){\r\n                scope.myPage.currentPage -= 1;\r\n            }else {\r\n                scope.myPage.currentPage=1;\r\n            }\r\n            myPage.setPageNub(scope.myPage.currentPage);\r\n            getPagination(scope.cityListUrl);\r\n        };\r\n        // nextPage\r\n        scope.nextPage = function(){\r\n            if(scope.myPage.currentPage < scope.myPage.numberOfPages){\r\n                scope.myPage.currentPage += 1;\r\n            }else {\r\n                scope.myPage.currentPage=scope.myPage.numberOfPages;\r\n            }\r\n            myPage.setPageNub(scope.myPage.currentPage);\r\n            getPagination(scope.cityListUrl)\r\n        };\r\n\r\n        // 跳转页\r\n        scope.jumpToPage = function(){\r\n            if(scope.myPage.jumpPageNum>0 || scope.myPage.jumpPageNum<=scope.myPage.numberOfPages){\r\n                scope.myPage.currentPage=scope.myPage.jumpPageNum;\r\n                myPage.setPageNub(scope.myPage.currentPage);\r\n                getPagination(scope.cityListUrl);\r\n                //scope.myPage.jumpPageNum='';\r\n            }else {\r\n                scope.myPage.showError=true;\r\n            }\r\n        };\r\n        // 修改每页显示的条数\r\n        scope.changeItemsPerPage = function(){\r\n            getPagination(scope.cityListUrl);\r\n        };\r\n        getPagination(scope.cityListUrl);\r\n\r\n        function getPagination(url){\r\n            \r\n            ctrl.http.get(url\r\n                ,{params:{\"page\":scope.myPage.currentPage,\"limit\":scope.myPage.itemsPerPage,\r\n                \"name\":scope.cityTip.name,\"monType\":scope.cityTip.monType,\r\n                \"seqno\":scope.cityTip.seqno,\"firmware\":scope.cityTip.firmware,\r\n                \"siteName\":scope.cityTip.siteName,\"status\":scope.cityTip.status,\r\n                \"productDate\":scope.cityTip.productDate,\"useDate\":scope.cityTip.useDate,\r\n                \"lastModifierId\":scope.cityTip.lastModifierId,\"checkUserName\":scope.cityTip.checkUserName}}).then(\r\n                function (response)\r\n                {\r\n    \r\n                    scope.names=response.data.data;\r\n                    scope.myPage.totalItems=response.data.totalItems;//当获取总数据后，修改默认值\r\n                    scope.myPage.currentPage = parseInt(myPage.pageNub);\r\n                    // pg.totalItems\r\n                    scope.myPage.totalItems = parseInt(scope.myPage.totalItems);\r\n\r\n                    // numberOfPages,总共分多少页\r\n                    scope.myPage.numberOfPages = Math.ceil(scope.myPage.totalItems/scope.myPage.itemsPerPage);\r\n                    //console.info(scope.myPage.totalItems);\r\n                    // judge currentPage > scope.numberOfPages\r\n                    if(scope.myPage.currentPage < 1){\r\n                        scope.myPage.currentPage = 1;\r\n                    }\r\n\r\n                    if(scope.myPage.currentPage > scope.myPage.numberOfPages){\r\n                        scope.myPage.currentPage = scope.myPage.numberOfPages;\r\n                    }\r\n\r\n                    scope.pageList = [];\r\n                    var i;\r\n                    if(scope.myPage.numberOfPages <= scope.myPage.pagesLength){\r\n                        // 判断总页数如果小于等于分页的长度，若小于则直接显示\r\n                        for(i =1; i <= scope.myPage.numberOfPages; i++){\r\n                            scope.pageList.push(i);\r\n                        }\r\n                    }else{\r\n                        // 总页数大于分页长度（此时分为三种情况：1.左边没有...2.右边没有...3.左右都有...）\r\n                        // 计算中心偏移量\r\n                        var offset = (scope.myPage.pagesLength - 1)/2;\r\n                        if(scope.myPage.currentPage <= offset){\r\n                            // 左边没有...\r\n                            for(i =1; i <= offset +1; i++){\r\n                                scope.pageList.push(i);\r\n                            }\r\n                            scope.pageList.push('...');\r\n                            scope.pageList.push(scope.myPage.numberOfPages);\r\n                            //    >实际总页数-每页的一半\r\n                        }else if(scope.myPage.currentPage > scope.myPage.numberOfPages - offset){\r\n                            scope.pageList.push(1);\r\n                            scope.pageList.push('...');\r\n                            for(i = offset + 1; i >= 1; i--){\r\n                                scope.pageList.push(scope.myPage.numberOfPages - i);\r\n                            }\r\n                            scope.pageList.push(scope.myPage.numberOfPages);\r\n                        }else{\r\n                            // 最后一种情况，两边都有...\r\n                            scope.pageList.push(1);\r\n                            scope.pageList.push('...');\r\n\r\n                            for(i = Math.ceil(offset/2) ; i >= 1; i--){\r\n                                scope.pageList.push(scope.myPage.currentPage - i);\r\n                            }\r\n                            scope.pageList.push(scope.myPage.currentPage);\r\n                            for(i = 1; i <= offset/2; i++){\r\n                                scope.pageList.push(scope.myPage.currentPage + i);\r\n                            }\r\n\r\n                            scope.pageList.push('...');\r\n                            scope.pageList.push(scope.myPage.numberOfPages);\r\n                        }\r\n                    }\r\n                }\r\n            )\r\n        }\r\n    }\r\n}\r\nSiteListDevice.templateUrl = 'components/siteList.html';\r\n\r\n\r\n"]}