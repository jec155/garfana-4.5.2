{"version":3,"sources":["../../src/components/deviceList.js"],"names":["baseURL","DeviceStreamPageCtrl","$scope","$http","$location","$rootScope","root","location","http","selall","checkedItems","URL","searchDeviceURL","pageParams","deviceTip","monTypeMap","statusMap","all","names","Object","assign","splice","length","event","x","ctrl","item","target","checked","push","confirm","$","ajax","type","url","data","id","dataType","success","da","reload","alert","error","re","console","info","ids","i","traditional","responseText","useDate1","useDate","productDate1","productDate","lastCheckDate1","lastCheckDate","scope","elem","attrs","templateUrl"],"mappings":"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","file":"deviceList.js","sourcesContent":["import {baseURL} from \"./common/constVal\";\nexport class DeviceStreamPageCtrl\n{\n    constructor($scope,$http,$location,$rootScope)\n    {\n        this.root=$rootScope;\n        this.location=$location;\n        this.http=$http;\n        $scope.http=$http;\n        this.selall=false;//全选标志\n        this.checkedItems=[];\n        $scope.URL=$rootScope.searchDeviceURL?$rootScope.searchDeviceURL\n                        :baseURL+'deviceListByPage';\n                            //'http://127.0.0.1:8080/grafana/deviceListByPage';\n        $scope.pageParams=$rootScope.deviceTip?$rootScope.deviceTip:{\n\n        };\n        $scope.monTypeMap = {\n                        'AIR':'空气质量',\n                        'WATER':'水环境',\n                        'MULTI':'多功能'\n                    };\n        $scope.statusMap = {\n            'NORMAL':'正常',\n            'STOP':'停用',\n            'EXCEPTION':'异常'\n        }\n    }\n    \n    selectAll(all,names)\n    {\n        all? Object.assign(this.checkedItems, names):this.checkedItems.splice(0,this.checkedItems.length);\n        //console.info(this.checkedItems);\n    }\n    updateSelection(event,x,ctrl)\n    {\n        var item=event.target;\n\n        item.checked?ctrl.checkedItems.push(x):ctrl.checkedItems.splice(x,1);\n\n    }\n    deleteDevice(item)\n    {   //alert(item.id);\n        if(confirm('确定删除此项?'))\n        {\n            $.ajax({\n                type: 'POST',\n                url: baseURL+'deleteDeviceByID',\n                //'http://127.0.0.1:8080/grafana/addCity',\n                data: {id:item.id},\n                \n                dataType:'json',\n                success:function (da)\n                {\n                    location.reload();\n                    alert('删除成功');\n                },\n                error:function (re) {\n                    console.info(re);\n                }\n            });\n        }\n    }\n    deleteSelDevices()\n    {\n        if(confirm('确定删除选中项目?'))\n        {\n            var ids=[];\n            for(let i=0;i<this.checkedItems.length;i++)\n            {\n                ids.push(this.checkedItems[i].id);\n            }\n\n            $.ajax({\n                type: 'POST',\n                traditional: true,\n                url: baseURL+'deleteSelDevices',\n               // 'http://127.0.0.1:8080/grafana/deleteSelCities',\n                data: {ids:ids},\n                success:function (da)\n                {\n                    location.reload();\n                    alert('删除成功');\n                },\n                error:function (re) {\n                    console.info(re.responseText);\n                }\n            });\n        }\n    }\n    setModel(item)\n    {\n        this.root.deviceTip=item;\n        this.root.deviceTip.useDate1=item.useDate;\n        this.root.deviceTip.productDate1=item.productDate;\n        this.root.deviceTip.lastCheckDate1=item.lastCheckDate;\n    }\n\n    link(scope, elem, attrs, ctrl)\n    {\n\n    }\n}\nDeviceStreamPageCtrl.templateUrl = 'components/deviceList.html';\n\n\n"]}