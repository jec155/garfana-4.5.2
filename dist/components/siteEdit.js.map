{"version":3,"sources":["../../src/components/siteEdit.js"],"names":["SiteEditCtrl","$scope","$http","$location","$rootScope","contextSrv","http","scope","location","cityModel","siteMonTypeMap","siteTypeMap","statusMap","areaTypeMap","autoUpdMap","true","false","cityAuto","loc","cityTip","id","siteCode","siteName","siteType","siteMonType","cityId","siteCreateTime","siteLatitude","siteLongitude","autoUpd","comment","managerment","user","name","$","ajax","type","url","data","dataType","success","da","history","go","alert","error","re","console","info","templateUrl"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oCACaA,Y;AAEX,sCAAYC,MAAZ,EAAmBC,KAAnB,EAAyBC,SAAzB,EAAmCC,UAAnC,EAA8CC,UAA9C,EACA;AAAA;;AACI,yBAAKC,IAAL,GAAUJ,KAAV;AACA,yBAAKK,KAAL,GAAWN,MAAX;AACA,yBAAKO,QAAL,GAAcL,SAAd;AACAF,2BAAOQ,SAAP,GAAiBL,WAAWK,SAA5B;AACA,yBAAKJ,UAAL,GAAgBA,UAAhB;AACAJ,2BAAOS,cAAP,GAAwB;AAClB,6BAAM,MADY;AAElB,6BAAM,UAFY;AAGlB,6BAAM,OAHY;AAIlB,6BAAM,MAJY;AAKlB,6BAAM,SALY;AAMlB,6BAAM;AANY,qBAAxB;AAQET,2BAAOU,WAAP,GAAqB;AACjB,kCAAW,MADM;AAEjB,mCAAY;AAFK,qBAArB;AAIAV,2BAAOW,SAAP,GAAmB;AACf,uCAAgB,IADD;AAEf,wCAAiB,IAFF;AAGf,sCAAe;AAHA,qBAAnB;AAKAX,2BAAOY,WAAP,GAAqB;AACjB,+BAAQ;AADS,qBAArB;AAGAZ,2BAAOa,UAAP,GAAoB;AAChBC,8BAAO,GADS;AAEhBC,+BAAQ;AAFQ,qBAApB;AAKL;;;;6CAED;AACI,4BAAIC,WAAS;AACXF,kCAAO,CADI;AAEXC,mCAAQ;AAFG,yBAAb;AAIA,4BAAIE,MAAI,KAAKV,QAAb;AACA,4BAAIW,UAAQ,EAAM,UAAS,KAAKZ,KAAL,CAAWE,SAAX,CAAqBW,EAApC;AACM,wCAAW,KAAKb,KAAL,CAAWE,SAAX,CAAqBY,QADtC;AAEM,wCAAW,KAAKd,KAAL,CAAWE,SAAX,CAAqBa,QAFtC;AAGM,wCAAW,KAAKf,KAAL,CAAWE,SAAX,CAAqBc,QAHtC;AAIM,2CAAc,KAAKhB,KAAL,CAAWE,SAAX,CAAqBe,WAJzC;AAKM,sCAAS,KAAKjB,KAAL,CAAWE,SAAX,CAAqBgB,MALpC;AAMM,0CAAa,KAAKlB,KAAL,CAAWE,SAAX,CAAqBiB,cANxC;AAOM,4CAAe,KAAKnB,KAAL,CAAWE,SAAX,CAAqBkB,YAP1C;AAQM,6CAAgB,KAAKpB,KAAL,CAAWE,SAAX,CAAqBmB,aAR3C;AASM,uCAAUX,SAAS,KAAKV,KAAL,CAAWE,SAAX,CAAqBoB,OAA9B,CAThB;AAUM,uCAAU,KAAKtB,KAAL,CAAWE,SAAX,CAAqBqB,OAVrC;AAWM,2CAAc,KAAKvB,KAAL,CAAWE,SAAX,CAAqBsB,WAXzC;AAYM,wCAAW,KAAK1B,UAAL,CAAgB2B,IAAhB,CAAqBC,IAZtC,EAAZ;;AAcAC,0BAAEC,IAAF,CAAO;AACHC,kCAAM,KADH;AAEHC,iCAAK,uDAFF;AAGC;AACJC,kCAAMnB,OAJH;AAKHoB,sCAAS,MALN;AAMHC,qCAAQ,iBAAUC,EAAV,EACR;AACI;AACAC,wCAAQC,EAAR,CAAW,CAAC,CAAZ;AACAC,sCAAM,MAAN;AACH,6BAXE;AAYHC,mCAAM,eAAUC,EAAV,EAAc;AAChBC,wCAAQC,IAAR,CAAaF,EAAb;AACH;AAdE,yBAAP;AAgBA;;;AAGH;;;;;;;;AAEH9C,yBAAaiD,WAAb,GAA2B,6DAA3B","file":"siteEdit.js","sourcesContent":["\nexport class SiteEditCtrl\n{\n  constructor($scope,$http,$location,$rootScope,contextSrv)\n  {\n      this.http=$http;\n      this.scope=$scope;\n      this.location=$location;\n      $scope.cityModel=$rootScope.cityModel;\n      this.contextSrv=contextSrv;\n      $scope.siteMonTypeMap = {\n            \"1\" : \"空气质量\",\n            \"2\" : \"空气污染重点企业\",\n            \"3\" : \"饮用水水质\",\n            \"4\" : \"污水水质\",\n            \"5\" : \"水污染重点企业\",\n            \"6\" : \"主要流域重点断面水质\"\n        }\n        $scope.siteTypeMap = {\n            \"PUBLIC\" : \"公有站点\",\n            \"PRIVATE\" : \"私有站点\"\n        }\n        $scope.statusMap = {\n            \"SITE_NORMAL\" : \"正常\",\n            \"SITE_DISABLE\" : \"停用\",\n            \"SITE_ERROR\" : \"异常\"\n        }\n        $scope.areaTypeMap = {\n            \"TWO\" : \"适用于居住、商业、工业混杂区\"\n        }\n        $scope.autoUpdMap = {\n            true : \"是\",\n            false : \"否\"\n        }\n\n  }\n  update()\n  {   \n      let cityAuto={\n        true : 1,\n        false : 0\n      }\n      var loc=this.location;\n      let cityTip={     \"siteid\":this.scope.cityModel.id,\n                        \"siteCode\":this.scope.cityModel.siteCode,\n                        \"siteName\":this.scope.cityModel.siteName,\n                        \"siteType\":this.scope.cityModel.siteType,\n                        \"siteMontype\":this.scope.cityModel.siteMonType,\n                        \"cityId\":this.scope.cityModel.cityId,\n                        \"createTime\":this.scope.cityModel.siteCreateTime,\n                        \"siteLatitude\":this.scope.cityModel.siteLatitude,\n                        \"siteLongitude\":this.scope.cityModel.siteLongitude,\n                        \"autoUpd\":cityAuto[this.scope.cityModel.autoUpd],\n                        \"comment\":this.scope.cityModel.comment,\n                        \"managerment\":this.scope.cityModel.managerment,\n                        \"username\":this.contextSrv.user.name};\n                        \n      $.ajax({\n          type: 'GET',\n          url: 'http://61.164.218.158:8080/AirServer/grafana/editSite',\n              //'http://127.0.0.1:8080/grafana/editCity',\n          data: cityTip,\n          dataType:'json',\n          success:function (da)\n          {\n              //loc.path('plugins/grafana-example-app/page/live-stream');\n              history.go(-1);\n              alert('编辑成功');\n          },\n          error:function (re) {\n              console.info(re);\n          }\n      });\n      /*this.http.post('http://127.0.0.1:8080/grafana/addCity',this.scope.cityModel).then(function (response) {\n          console.info(response);\n      });*/\n  }\n}\nSiteEditCtrl.templateUrl = 'public/plugins/grafana-example-app/components/siteEdit.html';\n\n\n"]}