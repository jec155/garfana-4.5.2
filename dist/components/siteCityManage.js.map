{"version":3,"sources":["../../src/components/siteCityManage.js"],"names":["SiteCityManageCtrl","$scope","$http","$location","$rootScope","root","http","location","availableSiteID","citySiteID","availableSites","citySites","scope","get","then","response","angular","forEach","data","index","array","id","siteName","cityModel","siteid","console","info","toAdd","select","document","getElementById","i","length","options","selected","value","text","a","$","ajax","type","url","item","dataType","success","da","reload","alert","error","re","elem","attrs","ctrl","templateUrl"],"mappings":"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","file":"siteCityManage.js","sourcesContent":["\nexport class SiteCityManageCtrl\n{\n  constructor($scope,$http,$location,$rootScope) {\n      this.root=$rootScope;\n      //this.root.cityModel=$rootScope.cityModel;\n      //console.info(this.root.cityModel);\n      this.http = $http;\n\n      this.location = $location;\n\n      $scope.availableSiteID=[];\n      $scope.citySiteID=[];\n      $scope.availableSites={};\n      $scope.citySites={};\n      this.scope=$scope;\n\n      $http.get('http://61.164.218.158:8080/AirServer/grafana/getAvailableDevices').then(function (response) {\n          angular.forEach(response.data.data, function(data,index,array){\n            //data等价于array[index]\n              //$scope.availableSites.push({id:data.id,siteName:data.siteName});\n              $scope.availableSites[data.id]=data.siteName;\n\n          });\n            //console.info($scope.availableSites);\n          //$scope.availableSites=response.data.data;\n      });\n\n      $http.get('http://61.164.218.158:8080/AirServer/grafana/getDevicesBySiteID?cityid='+$rootScope.cityModel.siteid).then(function (response) {\n          angular.forEach(response.data.data, function(data,index,array){\n              //data等价于array[index]\n             // $scope.citySites.push({id:data.id,siteName:data.siteName});\n              $scope.citySites[data.id]=data.siteName;\n          });\n          //$scope.citySites=response.data.data;\n      });\n  }\n\n    getSelectedA()\n    {\n        console.info('fffff');\n        let toAdd={};\n        let select = document.getElementById(\"A\");\n        for(let i=0;i<select.length;i++){\n            if(select.options[i].selected){\n                toAdd[select[i].value]=select[i].text;\n            }\n        }\n\n        for(let a in toAdd)\n        {\n            this.scope.citySites[a]=toAdd[a];\n            delete  this.scope.availableSites[a];\n        }\n    }\n    getSelectedAll()\n    {\n        let toAdd={};\n        let select = document.getElementById(\"A\");\n        for(let i=0;i<select.length;i++){\n            toAdd[select[i].value]=select[i].text;\n        }\n\n        for(let a in toAdd)\n        {\n            this.scope.citySites[a]=toAdd[a];\n            delete  this.scope.availableSites[a];\n        }\n    }\n    getSelectedR()\n    {\n        let toAdd={};\n        let select = document.getElementById(\"B\");\n        for(let i=0;i<select.length;i++){\n            if(select.options[i].selected){\n                toAdd[select[i].value]=select[i].text;\n            }\n        }\n\n        for(let a in toAdd)\n        {\n            this.scope.availableSites[a]=toAdd[a];\n            delete  this.scope.citySites[a];\n        }\n    }\n    getSelectedRAll()\n    {\n        let toAdd={};\n        let select = document.getElementById(\"B\");\n        for(let i=0;i<select.length;i++){\n            toAdd[select[i].value]=select[i].text;\n        }\n\n        for(var a in toAdd)\n        {\n            this.scope.availableSites[a]=toAdd[a];\n            delete  this.scope.citySites[a];\n        }\n    }\n\n    commit()\n    {\n        $.ajax({\n            type: 'POST',\n            url: 'http://61.164.218.158:8080/AirServer/grafana/deleteCityByID',\n            //'http://127.0.0.1:8080/grafana/addCity',\n            data: {id:item.id},\n            dataType:'json',\n            success:function (da)\n            {\n                location.reload();\n                alert('更新成功');\n            },\n            error:function (re) {\n                console.info(re);\n            }\n        });\n    }\n    link(scope, elem, attrs, ctrl)\n    {\n\n    }\n}\nSiteCityManageCtrl.templateUrl = 'public/plugins/grafana-example-app/components/siteCityManage.html';\n\n\n"]}